<template>
    <div>
        <Popover v-slot="{ open }" class="relative">
            <PopoverButton
                :class="open ? '' : 'text-opacity-90'"
                class="group inline-flex items-center rounded-md bg-orange-700 px-3 py-2 text-base font-medium text-white hover:text-opacity-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75"
            >
                <span>Weekly Atomic Ant</span>
                <BugAntIcon
                    :class="open ? '' : 'text-opacity-70'"
                    class="ml-2 h-5 w-5 text-orange-300 transition duration-150 ease-in-out group-hover:text-opacity-80"
                    aria-hidden="true"
                />
            </PopoverButton>

            <transition
                enter-active-class="transition duration-200 ease-out"
                enter-from-class="translate-y-1 opacity-0"
                enter-to-class="translate-y-0 opacity-100"
                leave-active-class="transition duration-150 ease-in"
                leave-from-class="translate-y-0 opacity-100"
                leave-to-class="translate-y-1 opacity-0"
            >
                <PopoverPanel
                    class="absolute left-1/2 z-10 mt-3 w-screen max-w-sm -translate-x-1/2 transform px-4 sm:px-0 lg:max-w-3xl"
                >
                    <div
                        class="overflow-hidden rounded-lg shadow-lg ring-1 ring-black ring-opacity-5"
                    >
                        <div class="relative grid gap-8 bg-white p-7 lg:grid-cols-2">
                            <a
                                v-for="item in filteredItems"
                                :key="item.name"
                                :href="item.href"
                                target="_blank"
                                class="-m-3 flex items-center rounded-lg p-2 transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus-visible:ring focus-visible:ring-orange-500 focus-visible:ring-opacity-50"
                            >
                                <div
                                    class="flex h-10 w-10 shrink-0 items-center justify-center text-white sm:h-12 sm:w-12"
                                >
                                    <div v-html="item.icon"></div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-900">
                                        {{ item.name }}
                                    </p>
                                    <p class="text-sm text-gray-500">
                                        {{ item.description }}
                                    </p>
                                </div>
                            </a>
                            <Link
                                :href="'/?author=' + props.user.id"
                                class="-m-3 flex items-center rounded-lg p-2 transition duration-150 ease-in-out hover:bg-gray-50 focus:outline-none focus-visible:ring focus-visible:ring-orange-500 focus-visible:ring-opacity-50"
                            >
                                <div
                                    class="flex h-10 w-10 shrink-0 items-center justify-center text-white sm:h-12 sm:w-12"
                                >
                                    <img class="rounded-lg h-10" :src="props.user.avatar" alt="avatar">
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-900">
                                        {{ props.user.name }}
                                    </p>
                                    <p class="text-sm text-gray-500 break-all">
                                        mOreMorEMOreMOREEEeeeee!
                                    </p>
                                </div>
                            </Link>
                        </div>
                        <div class="bg-gray-50 p-4">
                            <Link
                                :href="'/user/'+props.user.id"
                                class="flow-root rounded-md px-2 py-2 transition duration-150 ease-in-out hover:bg-gray-100 focus:outline-none focus-visible:ring focus-visible:ring-orange-500 focus-visible:ring-opacity-50"
                            >
                <div class="flex items-center">
                    <span class="text-sm font-medium text-gray-900">Thanks to &nbsp;</span>
                    <span class="text-sm font-medium text-red-400">{{ props.user.name }}! &nbsp;</span>
                </div>
                                <span class="block text-sm text-gray-500">
                  {{ props.user.name }} posted <span class="text-sm text-red-400">{{ props.user.arts_count }}</span> content this week and took the lead
                </span>
                            </Link>
                        </div>
                    </div>
                </PopoverPanel>
            </transition>
        </Popover>
    </div>
</template>

<script setup>
import { Popover, PopoverButton, PopoverPanel } from '@headlessui/vue'
import { BugAntIcon } from '@heroicons/vue/20/solid'
import {computed, onBeforeMount} from "vue";


const props = defineProps({
    user: Object
})
const solutions = [
    {
        name: 'Instagram',
        description: 'See more on Instagram',
        href: `https://www.instagram.com/${props.user.instagram}`,
        icon: `
<svg width="48" height="48" viewBox="0 0 500 500" enable-background="new 0 0 500 500" id="Layer_1" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

<g>

<path d="M442.919,366.23C399.231-6.743,488.493,36.284,104.75,78.657c-40.719,1.791-54.192,45.458-45.241,79.752   c7.098,83.218,17.475,166.172,25.519,249.286c5.956,51.266,66.394,46.673,104.644,40.883   c65.659-6.643,131.355-13.383,196.962-20.601C419.346,427.773,445.798,398.973,442.919,366.23z" fill="#3F3756"/>

<path d="M70.762,249.619c0.586-26.827-34.027-141.591,15.998-163.647c22.397-7.725,272.498-33.167,272.498-33.167   c71.544-10.251,59.172,121.385,64.171,154.833c-96.866,10.23-252.662,34.322-349.542,44.667L70.762,249.619z" fill="#DD5E50"/>

<path d="M138.925,78.781c-6.283,6.565-2.494,27.884-1.262,36.731c2.484,23.297,2.415,46.809,4.933,70.137   c1.393,18.458,3.137,36.885,4.671,55.328c0.721,3.228,12.596-2.571,15.534-2.509c-0.32,1.598-1.144,2.394-2.913,2.595   c-17.263,2.068-34.523,4.17-51.8,6.122c-8.516-0.69-36.325,10.481-34.966-4.014C67.876,169.986,27.282,73.921,138.925,78.781z" fill="#CF4135"/>

<path d="M328.31,214.22c20.241-1.134,40.478-5.429,60.709-7.719c4.609-1.675,25.835-1.504,25.705-6.223   c-1.398-34.917-5.606-69.878-12.819-104.101c-5.429-28.363-33.211-32.481-56.481-39.634   c85.035-11.875,69.542,89.911,79.338,145.069c-0.151,10.416-32.721,7.818-41.307,10.323c-8.362,0.898-16.735,1.712-25.093,2.635   C349.944,214.082,334.038,221.118,328.31,214.22z" fill="#E47A6D"/>

<path d="M383.762,99.222c-0.541,31.658-47.631,31.653-48.167-0.001C336.136,67.564,383.226,67.569,383.762,99.222z" fill="#E4796C"/>

<path d="M72.568,252.311c15.394,245.424,18.615,200.891,244.534,179.333c34.237-3.33,129.97-0.42,123.659-65.008   c-1.998-25.665-17.331-158.998-17.331-158.998l-90.578,10.667c0.2,102.505-139.232,119.36-167.756,23.039L72.568,252.311z" fill="#BC4762"/>

<path d="M421.122,225.728c-0.357-4.143-1.491-8.208-1.245-12.409c-0.146-0.108-0.296-0.206-0.445-0.305v-3.981   c-97.18,8.961-247.318,32.941-344.336,43.303c2.367,44.359,9.47,88.478,12.855,132.809c-1.488,73.042,58.044,66.144,111.902,58.72   c-36.215-13.939-42.739-122.567-47.833-159.359c2.442-1.296,3.723,0.198,4.935,2.358c24.929,40.84,86.688,51.567,121.909,18.24   c-0.001-0.002,55.183-76.317,55.183-76.317c-0.272,4.051-0.947,8.053-1.636,12.055c28.273-9.986,59.517-7.372,88.877-11.776   C421.257,227.951,421.218,226.844,421.122,225.728z" fill="#A42E45"/>

<path d="M331.386,222.73c-1.865,109.198-164.294,109.18-166.143-0.004   C167.107,113.533,329.536,113.55,331.386,222.73z" fill="#92457C"/>

<path d="M233.012,438.055c225.785-29.948,206.206-2.6,188.559-224.789   C458.396,454.156,458.596,410.784,233.012,438.055z" fill="#CA647E"/>

<path d="M310.799,276.036c51.769-78.048-37.468-161.577-115.453-116.164   C273.761,94.698,376.599,198.829,310.799,276.036z" fill="#A76295"/>

<path d="M369.866,370.576c1.688,1.868,5.024,4.534,5.436,6.821C374.246,377.795,367.179,371.321,369.866,370.576z" fill="#413756"/>

<path d="M371.59,192.403c0.316,3.48-1.785,2.174-1.412-0.608c0.097-0.749-0.333-1.995,0.772-1.987   C372.222,189.918,371.341,191.523,371.59,192.403z" fill="#403756"/>

<path d="M374.96,189.839c1.173,0.667,2.056,2.098,2.431,3.943C376.3,193.141,375.344,191.591,374.96,189.839z" fill="#433855"/>

<path d="M103.648,204.327c0.306-1.026,0.223-2.292,0.881-3.361C107.715,197.526,104.113,209.995,103.648,204.327z" fill="#433755"/>

<path d="M109.681,204.36c-0.824-1.647-1.268-3.358-0.963-5.713C109.929,200.73,109.849,202.54,109.681,204.36z" fill="#423755"/>

<path d="M375.085,106.39c-0.494,28.904-43.488,28.9-43.977-0.001C331.602,77.486,374.596,77.491,375.085,106.39z" fill="#D1905B"/>

<path d="M374.348,113.23c-12.505-16.638-26.021-20.022-43.046-7.254C332.521,71.715,384.246,80.621,374.348,113.23z   " fill="#BF723E"/>

<path d="M379.168,104.179c-4.152-34.528-54.451-28.475-50.84,5.879   C333.103,142.514,381.974,136.401,379.168,104.179z M372.791,113.2c-6.506,21.836-40.955,16.204-39.833-6.713l0,0l0,0v0l0,0   C334.086,74.784,381.951,83.025,372.791,113.2z" fill="#3F3756"/>

<path d="M442.919,366.23C408.702-67.197,435.857,62.07,104.745,78.645c-40.714,1.802-50.012,30.449-45.526,79.803   c34.2,358.442-10.787,301.856,327.423,269.528C419.346,427.773,445.798,398.973,442.919,366.23z M75.661,246.8   c-0.233-49.485-43.675-153.052,32.122-161.183c80.808-8.267,161.266-20.169,241.97-29.08c0,0-0.001,0-0.001,0   c79.881-9.365,60.478,92.55,70.675,143.616c-0.083,9.557-18.223,6.771-79.192,15.462c-14.316,2.934-3.551-45.653-53.984-69.572   c-64.892-31.579-133.038,21.77-125.131,91.604c0,0,0,0,0,0C156.286,243.832,80.854,249.437,75.661,246.8z M195.346,161.891   c47.513-42.248,124.676-12.6,132.927,50.012c9.404,58.521-51.508,107.168-106.716,87.15   C164.026,279.804,148.709,200.958,195.346,161.891C195.346,161.891,195.346,161.891,195.346,161.891z M437.146,371.508   c-4.768,52.649-51.502,47.904-91.475,52.973c-214.499,24.065-131.056,15.848-187.204,20.161   c-43.808,5.698-65.43-13.156-68.862-61.643c-3.512-38.792-8.043-77.482-12.04-116.226c-1.582-8.122-0.83-12.903,8.58-13.955   c13.844-0.953,65.298-7.221,72.493-8.081c5.164-1.347,8.12,5.122,9.328,9.714c31.024,80.277,148.51,69.09,164.885-13.998   c0,0,0,0,0,0c1.912-4.722,0.005-16.673,3.991-18.387c20.412-6.003,42.936-5.244,64.042-9.022c6.712-0.185,20.805-5.35,21.402,5.004   C425.249,263.287,436.027,320.645,437.146,371.508z" fill="#3F3756"/>

</g>

</svg>
        `,
    },
    {
        name: 'Twitter',
        description: 'Let\'s stalk the guy ',
        href: `https://twitter.com/${props.user.twitter}`,
        icon: `
<svg width="48" height="48" viewBox="0 0 500 500" enable-background="new 0 0 500 500" id="Layer_1" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

<g>

<path d="M456.329,128.359c-5.229,2.092-10.913,5.529-16.613,7.734c30.069-43.469,7.713-15.627-23.21-16.144   C379.959,59.2,297.078,68.677,274.399,136.181c-6.075,17.61-8.386,35.913-8.189,54.53c0.192,2.456-0.274,5.376-3.372,4.92   C183.026,190,118.406,146.986,90.486,71.561c-4.779,26.449-5.306,52.773,2.769,79.068c-14.487-6.452-27.548-14.605-38.385-26.457   c4.787,49.078,37.267,91.65,71.301,125.192c-12.547-1.38-25.101-5.036-36.061-10.463c8.006,35.485,40.549,62.6,74.677,72.864   c-14.694,36.599-77.435,86.743-121.116,75.609c122.707,87.224,319.136,28.618,375.696-110.874   c16.487-37.152,18.226-76.014,14.261-115.522C441.01,150.311,452.073,140.264,456.329,128.359z" fill="#58454D"/>

<path d="M52.495,391.129c44.359,0.615,98.946-39.991,117.19-80.146c-25.492-6.497-67.334-35.367-76.072-67.226   c0,0,24.285,8.05,32.487,8.689s12.062,1.122,12.062,1.122c-31.029-18.314-76.58-84.536-80.093-123.195   c2.588,4.397,31.997,24.505,40.127,24.768c-9.612-16.03-10.229-61.761-6.246-77.305c25.542,76.789,97.504,117.479,176.482,119.227   c0.64-38.582,8.744-103.19,70.552-113.444c39.405-3.047,63.019,15.383,75.694,39.891l36.347-8.363l-17.906,24.982l16.083-3.86   l-19.192,24.982C457.443,362.222,217.873,489.17,52.495,391.129z" fill="#9CC4CF"/>

<path d="M129.827,256.003c-2.842,1.042-4.282,4.215-7.839,5.17c5.165,0.72,10.222,1.449,12.421,6.671   c13.086,27.298,41.291,42.751,70.544,45.822c2.275,2.197-19.287,5.003-22.116,5.828c-3.893,3.344-4.478,10.174-7.841,14.425   c-3.057,10.384-29.531,32.77-3.164,25.693c24.162-3.393,78.938-37.393,49.844,14.937c-2.546,5.653,28.432,1.33,32.811,1.277   c63.005-6.154,117.084-45.86,155.637-94.06C350.947,411.181,176.448,457.085,54.236,393.585   c49.027-2.09,91.662-37.58,116.003-78.283c0.205-1.973,5.752-4.888,1.188-6.22c-32.788-9.163-60.132-32.145-76.053-62.09   C106.757,251.379,118.017,253.859,129.827,256.003z" fill="#7EADBC"/>

<path d="M367.826,83.403c-27.765-0.358-56.445,18.168-66.157,44.353c-0.621,1.762-0.14,2.422,1.802,2.323   c34.863-6.384,14.47,16.522,1.673,29.918c4.05-0.709,8.518-6.366,12.485-3.278c2.212,5.735-12.769,14.84-16.101,19.976   c-10.142,8.855-17.107,20.787-28.265,28.413c-5.071,3.295-6.333-1.433-8.528-4.855c1.633-0.22,5.778,0.932,6.551-0.639   c-0.663-14.313,1.719-28.387,4.138-42.512C282.152,114.851,322.642,74.191,367.826,83.403z" fill="#7EADBC"/>

<path d="M107.564,170.586c12.782,38.087,6.693,57.929,37.935,88.687c-42.773-30.339-71.002-76.541-86.616-126.008   c11.87,9.318,23.555,18.487,38.085,22.942C100.676,160.365,104.194,165.871,107.564,170.586z" fill="#7EADBC"/>

<path d="M418.843,267.609c-2.291,2.49-7.087,2.648-8.752,5.766c-0.227,5.221-7.06,9.741-9.323,3.156   c0.2-18.003,10.575-35.254,9.715-53.386c0.85-14.321,1.336-28.55,0.735-42.883c0.013-1.05,0.785-1.866,1.661-1.466   c1.571,0.717,2.677-0.628,4.074-0.537c0.627,0.041,0.754-0.758,0.837-1.345c0.028-4.058,4.572-2.803,5.244-5.518   c0.262-4.517,1.371-5.443,5.909-5.191C433.719,200.112,429.985,235.25,418.843,267.609z" fill="#B0D0D9"/>

<path d="M108.442,115.056c-9.921,12.03-6.784,30.424-6.725,45.07c-10.509-24.771-12.161-52.256-9.254-78.759   C96.283,93.642,102.212,104.119,108.442,115.056z" fill="#7EADBC"/>

<path d="M427.611,166.167c-1.356-0.857-1.923-2.014-1.378-3.601c0.726-1.597-1.623-3.098,0.053-4.237   c3.962-4.064,8.377-8.096,11.408-12.828c0.115-1.013,1.467-0.765,1.9-1.612c1.503-0.993,0.402-2.346-0.86-1.234   c-1.076,1.154-3.011,0.896-3.818,2.429c-0.154,0.292-0.516,0.346-0.837,0.337c-4.274,0.129-8.312,3.657-12.532,2.794   c7.758-2.683,15.288-6.206,23.148-8.425c-5.205,6.191-10.323,11.812-15.599,17.836   C426.109,159.847,427.609,163.129,427.611,166.167z" fill="#9CC4CF"/>

<path d="M204.256,325.302c23.86,7.283-31.426,39.847-30.075,23.056C180.07,337.315,191.097,327.234,204.256,325.302   z" fill="#7EADBC"/>

<path d="M258.358,356.219c21.288,3.694-19.352,23.832-23.378,12.091   C234.329,358.008,250.948,357.024,258.358,356.219z" fill="#7EADBC"/>

<path d="M334.624,103.003c-4.088,7.485-12.925,13.011-18.492,19.906c-3.255,4.269-10.193,1.368-7.648-4.361   c3.609-7.245,10.718-12.235,17.632-16.118C328.843,100.784,334.162,97.597,334.624,103.003z" fill="#7EADBC"/>

<path d="M149.985,279.753c-13.388-2.909-12.349-23.028-2.529-10.427   C148.167,272.524,156.11,278.312,149.985,279.753z" fill="#7EAEBD"/>

<path d="M123.833,261.953c-0.051,0.021-0.097,0.044-0.149,0.064c0.055,0.009,0.102,0.017,0.156,0.026   C123.839,262.014,123.83,261.982,123.833,261.953z" fill="#58454D"/>

<path d="M456.329,128.359c-5.229,2.092-10.913,5.529-16.613,7.734c30.069-43.469,7.713-15.627-23.21-16.144   C379.959,59.2,297.078,68.677,274.399,136.181c-6.075,17.61-8.386,35.913-8.189,54.53c0.192,2.456-0.274,5.376-3.372,4.92   C183.026,190,118.406,146.986,90.486,71.561c-4.779,26.449-5.306,52.773,2.769,79.068c-14.487-6.452-27.548-14.605-38.385-26.457   c4.787,49.078,37.267,91.65,71.301,125.192c-12.547-1.38-25.101-5.036-36.061-10.463c8.006,35.485,40.549,62.6,74.677,72.864   c-14.694,36.599-77.435,86.743-121.116,75.609c122.707,87.224,319.136,28.618,375.696-110.874   c16.487-37.152,18.226-76.014,14.261-115.522C441.01,150.311,452.073,140.264,456.329,128.359z M439.676,145.651   c-3.702,5.312-10.643,9.668-12.504,15.737c0.313,1.718,0.349,3.395,0.458,5.081c22.059,196.997-207.622,311.199-370.982,226.56   c48.072-1.98,89.435-36.463,113.995-75.932c1.153-1.729,0.833-4.166,3.626-3.161c1.801,0.825,16.554,1.836,12.074-1.415   c-37.939-5.986-71.161-30.682-88.992-64.536c13.322,5.697,27.249,6.754,40.835,10.625c1.542,1.178,25.011,10.042,19.445,5.078   c-48.246-27.172-80.67-75.629-96.924-127.743c11.204,9.175,22.835,17.177,36.39,21.917c3.397,4.843,10.617,17.669,15.731,18.814   c-18.812-26.384-24.239-60.96-20.3-93.058c23.871,74.37,100.414,114.322,174.883,117.462c0,0,0,0,0,0   c1.288-0.266,4.825,0.38,4.664-1.633c-1.054-14.504,1.025-29.07,3.465-43.352c6.058-45.131,53.33-86.308,98.812-65.005   c15.528,6.392,29.395,17.495,36.43,33.029c5.211,6.118,29.12-2.999,36.061-6.163c-7.041,10.7-15.638,19.613-25.695,27.396   c-0.672,0.728-2.209,1.279-1.832,2.468c0.429,1.08,1.458,0.365,2.231,0.395c7.758-2.682,15.288-6.206,23.148-8.425   C442.907,141.882,441.315,143.786,439.676,145.651z" fill="#58454D"/>

</g>

</svg>
`
,
    },
    {
        name: 'NSO',
        description: 'See this awesome user on NSO!',
        href: `https://nso.noircontact.tech/user/${props.user.nso}`,
        icon: `
<svg class="bg-rose-100 rounded-lg" xmlns="http://www.w3.org/2000/svg"
 width="48" height="48" viewBox="0 0 512.000000 512.000000"
 preserveAspectRatio="xMidYMid meet">

<g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M1718 2842 c-75 -15 -78 -16 -78 -44 0 -27 2 -28 50 -28 l50 0 0
-215 0 -215 -40 0 c-38 0 -40 -2 -40 -30 l0 -30 140 0 c114 0 140 3 140 14 0
8 3 21 6 30 5 13 -2 16 -45 16 l-51 0 0 184 0 185 71 35 c83 42 133 46 172 16
38 -30 47 -77 47 -257 l0 -162 -42 -3 c-39 -3 -43 -6 -46 -30 l-3 -28 140 0
141 0 0 30 c0 29 -2 30 -45 30 l-46 0 3 188 c3 177 2 189 -19 233 -33 65 -74
92 -149 97 -57 4 -68 1 -141 -37 -43 -23 -81 -41 -85 -41 -3 0 -8 18 -12 40
-7 46 -4 45 -118 22z"/>
<path d="M2568 2846 c-88 -32 -128 -81 -128 -160 0 -71 45 -113 162 -149 108
-34 138 -57 138 -103 0 -80 -99 -126 -194 -90 -41 16 -45 21 -56 67 -12 48
-14 50 -44 47 l-31 -3 3 -60 c5 -113 3 -111 132 -121 184 -15 300 61 287 190
-6 71 -45 104 -171 146 -53 17 -103 38 -111 47 -24 24 -19 86 9 112 30 28 103
39 146 21 24 -10 31 -20 36 -50 9 -55 17 -63 54 -55 32 7 32 8 26 52 -3 25 -6
58 -6 74 0 24 -6 30 -37 38 -52 15 -170 13 -215 -3z"/>
<path d="M3170 2851 c-114 -35 -199 -146 -208 -272 -13 -180 103 -309 278
-309 118 0 208 57 261 166 28 57 33 76 33 144 0 66 -5 86 -30 136 -32 65 -91
117 -152 134 -42 11 -145 12 -182 1z m161 -74 c71 -48 99 -131 85 -258 -10
-102 -60 -171 -132 -185 -78 -15 -151 25 -185 101 -23 49 -25 191 -5 248 38
104 154 150 237 94z"/>
</g>
</svg>
    `,
    },
]

const filteredItems = computed(() => {
    const filteredSolutions = solutions.filter(solution => {
        if (solution.name === 'Instagram') {
            return props.user.instagram !== null;
        } else if (solution.name === 'Twitter') {
            return props.user.twitter !== null;
        } else if (solution.name === 'NSO') {
            return props.user.nso !== null;
        }
    });

    return filteredSolutions;
});

</script>
